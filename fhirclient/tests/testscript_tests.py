#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
#  Generated from FHIR 4.0.1-9346c8cc45
#  2020, SMART Health IT.


import os
import io
import unittest
import json
from fhirclient.models import testscript

class TestScriptTests(unittest.TestCase):
    def instantiate_from(self, filename):
        datadir = os.environ.get('FHIR_UNITTEST_DATADIR') or ''
        with io.open(os.path.join(datadir, filename), 'r', encoding='utf-8') as handle:
            js = json.load(handle)
            self.assertEqual("TestScript", js["resourceType"])
        return testscript.TestScript(js)

    def testTestScript1(self):
        inst = self.instantiate_from('testscript-example-history.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript1(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript1(inst2)

    def implTestScript1(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertTrue(inst.experimental)
        self.assertFalse(inst.fixture[0].autocreate)
        self.assertFalse(inst.fixture[0].autodelete)
        self.assertEqual(inst.fixture[0].id.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.fixture[0].id.as_json(), "fixture-patient-create")
        self.assertFalse(inst.fixture[1].autocreate)
        self.assertFalse(inst.fixture[1].autodelete)
        self.assertEqual(inst.fixture[1].id.value, FHIRString("fixture-patient-update").value)
        self.assertEqual(inst.fixture[1].id.as_json(), "fixture-patient-update")
        self.assertEqual(inst.id.value, FHIRString("testscript-example-history").value)
        self.assertEqual(inst.id.as_json(), "testscript-example-history")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9877").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9877")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Update, Delete and History (Instance) Operations").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Update, Delete and History (Instance) Operations")
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#update").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#update")
        self.assertEqual(inst.metadata.capability[0].link[1].value, FHIRUri("http://hl7.org/fhir/http.html#delete").value)
        self.assertEqual(inst.metadata.capability[0].link[1].as_json(), "http://hl7.org/fhir/http.html#delete")
        self.assertEqual(inst.metadata.capability[0].link[2].value, FHIRUri("http://hl7.org/fhir/http.html#history").value)
        self.assertEqual(inst.metadata.capability[0].link[2].as_json(), "http://hl7.org/fhir/http.html#history")
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("TestScript Example History").value)
        self.assertEqual(inst.name.as_json(), "TestScript Example History")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient (Conditional) Create, Update, Delete and History (Instance) Operations").value)
        self.assertEqual(inst.purpose.as_json(), "Patient (Conditional) Create, Update, Delete and History (Instance) Operations")
        self.assertEqual(inst.setup.action[0].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[0].operation.accept.as_json(), "json")
        self.assertEqual(inst.setup.action[0].operation.description.value, FHIRString("Execute a delete operation to insure the patient does not exist on the server.").value)
        self.assertEqual(inst.setup.action[0].operation.description.as_json(), "Execute a delete operation to insure the patient does not exist on the server.")
        self.assertTrue(inst.setup.action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[0].operation.label.value, FHIRString("SetupDeletePatient").value)
        self.assertEqual(inst.setup.action[0].operation.label.as_json(), "SetupDeletePatient")
        self.assertEqual(inst.setup.action[0].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[0].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[0].operation.type.code.value, FHIRCode("delete").value)
        self.assertEqual(inst.setup.action[0].operation.type.code.as_json(), "delete")
        self.assertEqual(inst.setup.action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK) or 204(No Content).").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK) or 204(No Content).")
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.value, FHIRCode("in").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.as_json(), "in")
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.value, FHIRString("200,204").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.as_json(), "200,204")
        self.assertFalse(inst.setup.action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[2].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[2].operation.accept.as_json(), "json")
        self.assertEqual(inst.setup.action[2].operation.contentType.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[2].operation.contentType.as_json(), "json")
        self.assertEqual(inst.setup.action[2].operation.description.value, FHIRString("Create patient resource on test server using the contents of fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.description.as_json(), "Create patient resource on test server using the contents of fixture-patient-create")
        self.assertTrue(inst.setup.action[2].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[2].operation.label.value, FHIRString("SetupCreatePatient").value)
        self.assertEqual(inst.setup.action[2].operation.label.as_json(), "SetupCreatePatient")
        self.assertEqual(inst.setup.action[2].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[2].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[2].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[2].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[2].operation.sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.setup.action[2].operation.type.code.value, FHIRCode("update").value)
        self.assertEqual(inst.setup.action[2].operation.type.code.as_json(), "update")
        self.assertEqual(inst.setup.action[2].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[2].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 201(Created).").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 201(Created).")
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.value, FHIRString("201").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.as_json(), "201")
        self.assertFalse(inst.setup.action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[4].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[4].operation.accept.as_json(), "json")
        self.assertEqual(inst.setup.action[4].operation.contentType.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[4].operation.contentType.as_json(), "json")
        self.assertEqual(inst.setup.action[4].operation.description.value, FHIRString("Update patient resource on test server using the contents of fixture-patient-update").value)
        self.assertEqual(inst.setup.action[4].operation.description.as_json(), "Update patient resource on test server using the contents of fixture-patient-update")
        self.assertTrue(inst.setup.action[4].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[4].operation.label.value, FHIRString("SetupUpdatePatient").value)
        self.assertEqual(inst.setup.action[4].operation.label.as_json(), "SetupUpdatePatient")
        self.assertEqual(inst.setup.action[4].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[4].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[4].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[4].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[4].operation.sourceId.value, FHIRId("fixture-patient-update").value)
        self.assertEqual(inst.setup.action[4].operation.sourceId.as_json(), "fixture-patient-update")
        self.assertEqual(inst.setup.action[4].operation.type.code.value, FHIRCode("update").value)
        self.assertEqual(inst.setup.action[4].operation.type.code.as_json(), "update")
        self.assertEqual(inst.setup.action[4].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[4].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[5].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.setup.action[5].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[5].assert_fhir.responseCode.value, FHIRString("200").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.responseCode.as_json(), "200")
        self.assertFalse(inst.setup.action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.test[0].action[0].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.test[0].action[0].operation.accept.as_json(), "json")
        self.assertEqual(inst.test[0].action[0].operation.contentType.value, FHIRCode("json").value)
        self.assertEqual(inst.test[0].action[0].operation.contentType.as_json(), "json")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Get the Patient history on the test server using the id from fixture-patient-create.").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Get the Patient history on the test server using the id from fixture-patient-create.")
        self.assertTrue(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.targetId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.test[0].action[0].operation.targetId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("history").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "history")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[1].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Bundle.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the returned resource type is Bundle.")
        self.assertEqual(inst.test[0].action[2].assert_fhir.resource.value, FHIRCode("Bundle").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.resource.as_json(), "Bundle")
        self.assertFalse(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle conforms to the base FHIR specification.").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.as_json(), "Confirm that the returned Bundle conforms to the base FHIR specification.")
        self.assertEqual(inst.test[0].action[3].assert_fhir.validateProfileId.value, FHIRId("bundle-profile").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.validateProfileId.as_json(), "bundle-profile")
        self.assertFalse(inst.test[0].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle type equals 'history'.").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.as_json(), "Confirm that the returned Bundle type equals 'history'.")
        self.assertEqual(inst.test[0].action[4].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.operator.as_json(), "equals")
        self.assertEqual(inst.test[0].action[4].assert_fhir.path.value, FHIRString("fhir:Bundle/fhir:type/@value").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.path.as_json(), "fhir:Bundle/fhir:type/@value")
        self.assertEqual(inst.test[0].action[4].assert_fhir.value.value, FHIRString("history").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.value.as_json(), "history")
        self.assertFalse(inst.test[0].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Get the history for a known Patient and validate response.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Get the history for a known Patient and validate response.")
        self.assertEqual(inst.test[0].id.value, FHIRString("01-HistoryPatient").value)
        self.assertEqual(inst.test[0].id.as_json(), "01-HistoryPatient")
        self.assertEqual(inst.test[0].name.value, FHIRString("History Patient").value)
        self.assertEqual(inst.test[0].name.as_json(), "History Patient")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example-history").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example-history")
        self.assertEqual(inst.variable[0].name.value, FHIRString("createResourceId").value)
        self.assertEqual(inst.variable[0].name.as_json(), "createResourceId")
        self.assertEqual(inst.variable[0].path.value, FHIRString("Patient/id").value)
        self.assertEqual(inst.variable[0].path.as_json(), "Patient/id")
        self.assertEqual(inst.variable[0].sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.variable[0].sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")

    def testTestScript2(self):
        inst = self.instantiate_from('testscript-example-update.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript2(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript2(inst2)

    def implTestScript2(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertEqual(inst.description.value, FHIRMarkdown("TestScript example resource with setup to delete if present and create a new instance of a Patient; and single test definition to update that Patient with various asserts.").value)
        self.assertEqual(inst.description.as_json(), "TestScript example resource with setup to delete if present and create a new instance of a Patient; and single test definition to update that Patient with various asserts.")
        self.assertTrue(inst.experimental)
        self.assertFalse(inst.fixture[0].autocreate)
        self.assertFalse(inst.fixture[0].autodelete)
        self.assertEqual(inst.fixture[0].id.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.fixture[0].id.as_json(), "fixture-patient-create")
        self.assertFalse(inst.fixture[1].autocreate)
        self.assertFalse(inst.fixture[1].autodelete)
        self.assertEqual(inst.fixture[1].id.value, FHIRString("fixture-patient-update").value)
        self.assertEqual(inst.fixture[1].id.as_json(), "fixture-patient-update")
        self.assertEqual(inst.id.value, FHIRString("testscript-example-update").value)
        self.assertEqual(inst.id.as_json(), "testscript-example-update")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9882").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9882")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Update and Delete Operations").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Update and Delete Operations")
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#update").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#update")
        self.assertEqual(inst.metadata.capability[0].link[1].value, FHIRUri("http://hl7.org/fhir/http.html#delete").value)
        self.assertEqual(inst.metadata.capability[0].link[1].as_json(), "http://hl7.org/fhir/http.html#delete")
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("TestScript Example Update").value)
        self.assertEqual(inst.name.as_json(), "TestScript Example Update")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient (Conditional) Create, Update, Delete Operations").value)
        self.assertEqual(inst.purpose.as_json(), "Patient (Conditional) Create, Update, Delete Operations")
        self.assertEqual(inst.setup.action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.setup.action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.setup.action[0].operation.description.value, FHIRString("Execute a delete operation to insure the patient does not exist on the server.").value)
        self.assertEqual(inst.setup.action[0].operation.description.as_json(), "Execute a delete operation to insure the patient does not exist on the server.")
        self.assertTrue(inst.setup.action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[0].operation.label.value, FHIRString("SetupDeletePatient").value)
        self.assertEqual(inst.setup.action[0].operation.label.as_json(), "SetupDeletePatient")
        self.assertEqual(inst.setup.action[0].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[0].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[0].operation.type.code.value, FHIRCode("delete").value)
        self.assertEqual(inst.setup.action[0].operation.type.code.as_json(), "delete")
        self.assertEqual(inst.setup.action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK) or 204(No Content).").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK) or 204(No Content).")
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.value, FHIRCode("in").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.as_json(), "in")
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.value, FHIRString("200,204").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.as_json(), "200,204")
        self.assertFalse(inst.setup.action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[2].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.setup.action[2].operation.accept.as_json(), "xml")
        self.assertEqual(inst.setup.action[2].operation.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.setup.action[2].operation.contentType.as_json(), "xml")
        self.assertEqual(inst.setup.action[2].operation.description.value, FHIRString("Create patient resource on test server using the contents of fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.description.as_json(), "Create patient resource on test server using the contents of fixture-patient-create")
        self.assertTrue(inst.setup.action[2].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[2].operation.label.value, FHIRString("SetupCreatePatient").value)
        self.assertEqual(inst.setup.action[2].operation.label.as_json(), "SetupCreatePatient")
        self.assertEqual(inst.setup.action[2].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[2].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[2].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[2].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[2].operation.sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.setup.action[2].operation.type.code.value, FHIRCode("update").value)
        self.assertEqual(inst.setup.action[2].operation.type.code.as_json(), "update")
        self.assertEqual(inst.setup.action[2].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[2].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 201(Created).").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 201(Created).")
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.value, FHIRString("201").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.as_json(), "201")
        self.assertFalse(inst.setup.action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.test[0].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Update patient resource on test server using the contents of fixture-patient-update").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Update patient resource on test server using the contents of fixture-patient-update")
        self.assertTrue(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.label.value, FHIRString("SetupUpdatePatient").value)
        self.assertEqual(inst.test[0].action[0].operation.label.as_json(), "SetupUpdatePatient")
        self.assertEqual(inst.test[0].action[0].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.test[0].action[0].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.sourceId.value, FHIRId("fixture-patient-update").value)
        self.assertEqual(inst.test[0].action[0].operation.sourceId.as_json(), "fixture-patient-update")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("update").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "update")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned format is XML.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the returned format is XML.")
        self.assertFalse(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.")
        self.assertEqual(inst.test[0].action[3].assert_fhir.headerField.value, FHIRString("Last-Modified").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.headerField.as_json(), "Last-Modified")
        self.assertEqual(inst.test[0].action[3].assert_fhir.operator.value, FHIRCode("notEmpty").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.operator.as_json(), "notEmpty")
        self.assertTrue(inst.test[0].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Update a Patient and validate response.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Update a Patient and validate response.")
        self.assertEqual(inst.test[0].id.value, FHIRString("01-UpdatePatient").value)
        self.assertEqual(inst.test[0].id.as_json(), "01-UpdatePatient")
        self.assertEqual(inst.test[0].name.value, FHIRString("Update Patient").value)
        self.assertEqual(inst.test[0].name.as_json(), "Update Patient")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example-update").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example-update")
        self.assertEqual(inst.variable[0].name.value, FHIRString("createResourceId").value)
        self.assertEqual(inst.variable[0].name.as_json(), "createResourceId")
        self.assertEqual(inst.variable[0].path.value, FHIRString("Patient/id").value)
        self.assertEqual(inst.variable[0].path.as_json(), "Patient/id")
        self.assertEqual(inst.variable[0].sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.variable[0].sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")

    def testTestScript3(self):
        inst = self.instantiate_from('testscript-example-multisystem.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript3(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript3(inst2)

    def implTestScript3(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertEqual(inst.destination[0].index, 1)
        self.assertEqual(inst.destination[0].profile.code.value, FHIRCode("FHIR-Server").value)
        self.assertEqual(inst.destination[0].profile.code.as_json(), "FHIR-Server")
        self.assertEqual(inst.destination[1].index, 2)
        self.assertEqual(inst.destination[1].profile.code.value, FHIRCode("FHIR-Server").value)
        self.assertEqual(inst.destination[1].profile.code.as_json(), "FHIR-Server")
        self.assertTrue(inst.experimental)
        self.assertEqual(inst.id.value, FHIRString("testscript-example-multisystem").value)
        self.assertEqual(inst.id.as_json(), "testscript-example-multisystem")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9878").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9878")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Read Operation").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Read Operation")
        self.assertEqual(inst.metadata.capability[0].destination, 1)
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#read").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#read")
        self.assertEqual(inst.metadata.capability[0].origin[0], 1)
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.capability[1].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[1].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[1].description.value, FHIRString("Patient Read Operation").value)
        self.assertEqual(inst.metadata.capability[1].description.as_json(), "Patient Read Operation")
        self.assertEqual(inst.metadata.capability[1].destination, 2)
        self.assertEqual(inst.metadata.capability[1].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#read").value)
        self.assertEqual(inst.metadata.capability[1].link[0].as_json(), "http://hl7.org/fhir/http.html#read")
        self.assertEqual(inst.metadata.capability[1].origin[0], 1)
        self.assertTrue(inst.metadata.capability[1].required)
        self.assertFalse(inst.metadata.capability[1].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("testscript-example-multisystem").value)
        self.assertEqual(inst.name.as_json(), "testscript-example-multisystem")
        self.assertEqual(inst.origin[0].index, 1)
        self.assertEqual(inst.origin[0].profile.code.value, FHIRCode("FHIR-Client").value)
        self.assertEqual(inst.origin[0].profile.code.as_json(), "FHIR-Client")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient Read Operation").value)
        self.assertEqual(inst.purpose.as_json(), "Patient Read Operation")
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.test[0].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Read a Patient from the first destination test system and perform basic validation.").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Read a Patient from the first destination test system and perform basic validation.")
        self.assertEqual(inst.test[0].action[0].operation.destination, 1)
        self.assertTrue(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.origin, 1)
        self.assertEqual(inst.test[0].action[0].operation.params.value, FHIRString("/${Dest1PatientResourceId}").value)
        self.assertEqual(inst.test[0].action[0].operation.params.as_json(), "/${Dest1PatientResourceId}")
        self.assertEqual(inst.test[0].action[0].operation.requestId.value, FHIRId("request-read-patient-01").value)
        self.assertEqual(inst.test[0].action[0].operation.requestId.as_json(), "request-read-patient-01")
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the request method GET was sent by the client system under test.").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the request method GET was sent by the client system under test.")
        self.assertEqual(inst.test[0].action[1].assert_fhir.requestMethod.value, FHIRCode("get").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.requestMethod.as_json(), "get")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the client requested an Accept of xml.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the client requested an Accept of xml.")
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.value, FHIRCode("request").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.as_json(), "request")
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.value, FHIRString("Accept").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.as_json(), "Accept")
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.value, FHIRCode("contains").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.as_json(), "contains")
        self.assertEqual(inst.test[0].action[2].assert_fhir.value.value, FHIRString("xml").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.value.as_json(), "xml")
        self.assertFalse(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[3].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[3].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[4].assert_fhir.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned format is XML.").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.as_json(), "Confirm that the returned format is XML.")
        self.assertEqual(inst.test[0].action[4].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.direction.as_json(), "response")
        self.assertFalse(inst.test[0].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Patient.").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.as_json(), "Confirm that the returned resource type is Patient.")
        self.assertEqual(inst.test[0].action[5].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[5].assert_fhir.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.resource.as_json(), "Patient")
        self.assertFalse(inst.test[0].action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Read a Patient from the first destination test system using the user defined dynamic variable ${Dest1PatientResourceId}. Perform basic validation.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Read a Patient from the first destination test system using the user defined dynamic variable ${Dest1PatientResourceId}. Perform basic validation.")
        self.assertEqual(inst.test[0].id.value, FHIRString("01-ReadPatient-Destination1").value)
        self.assertEqual(inst.test[0].id.as_json(), "01-ReadPatient-Destination1")
        self.assertEqual(inst.test[0].name.value, FHIRString("ReadPatient-Destination1").value)
        self.assertEqual(inst.test[0].name.as_json(), "ReadPatient-Destination1")
        self.assertEqual(inst.test[1].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[1].action[0].operation.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[0].operation.contentType.as_json(), "xml")
        self.assertEqual(inst.test[1].action[0].operation.description.value, FHIRString("Read a Patient from the second destination test system and perform basic validation.").value)
        self.assertEqual(inst.test[1].action[0].operation.description.as_json(), "Read a Patient from the second destination test system and perform basic validation.")
        self.assertEqual(inst.test[1].action[0].operation.destination, 2)
        self.assertTrue(inst.test[1].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[1].action[0].operation.origin, 1)
        self.assertEqual(inst.test[1].action[0].operation.params.value, FHIRString("/${Dest2PatientResourceId}").value)
        self.assertEqual(inst.test[1].action[0].operation.params.as_json(), "/${Dest2PatientResourceId}")
        self.assertEqual(inst.test[1].action[0].operation.requestHeader[0].field.value, FHIRString("Accept-Charset").value)
        self.assertEqual(inst.test[1].action[0].operation.requestHeader[0].field.as_json(), "Accept-Charset")
        self.assertEqual(inst.test[1].action[0].operation.requestHeader[0].value.value, FHIRString("utf-8").value)
        self.assertEqual(inst.test[1].action[0].operation.requestHeader[0].value.as_json(), "utf-8")
        self.assertEqual(inst.test[1].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[1].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[1].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[1].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[1].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[1].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.value, FHIRString("Confirm that the client requested an Accept of xml.").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.as_json(), "Confirm that the client requested an Accept of xml.")
        self.assertEqual(inst.test[1].action[1].assert_fhir.direction.value, FHIRCode("request").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.direction.as_json(), "request")
        self.assertEqual(inst.test[1].action[1].assert_fhir.headerField.value, FHIRString("Accept").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.headerField.as_json(), "Accept")
        self.assertEqual(inst.test[1].action[1].assert_fhir.operator.value, FHIRCode("contains").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.operator.as_json(), "contains")
        self.assertEqual(inst.test[1].action[1].assert_fhir.value.value, FHIRString("xml").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.value.as_json(), "xml")
        self.assertFalse(inst.test[1].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[1].action[2].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[1].action[2].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[1].action[2].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[1].action[2].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[1].action[2].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[1].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[3].assert_fhir.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[3].assert_fhir.contentType.as_json(), "xml")
        self.assertEqual(inst.test[1].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned format is XML.").value)
        self.assertEqual(inst.test[1].action[3].assert_fhir.description.as_json(), "Confirm that the returned format is XML.")
        self.assertEqual(inst.test[1].action[3].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[1].action[3].assert_fhir.direction.as_json(), "response")
        self.assertFalse(inst.test[1].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Patient.").value)
        self.assertEqual(inst.test[1].action[4].assert_fhir.description.as_json(), "Confirm that the returned resource type is Patient.")
        self.assertEqual(inst.test[1].action[4].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[1].action[4].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[1].action[4].assert_fhir.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[1].action[4].assert_fhir.resource.as_json(), "Patient")
        self.assertFalse(inst.test[1].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].description.value, FHIRString("Read a Patient from the second destination test system using the user defined dynamic variable ${Dest2PatientResourceId}. Perform basic validation.").value)
        self.assertEqual(inst.test[1].description.as_json(), "Read a Patient from the second destination test system using the user defined dynamic variable ${Dest2PatientResourceId}. Perform basic validation.")
        self.assertEqual(inst.test[1].id.value, FHIRString("02-ReadPatient-Destination2").value)
        self.assertEqual(inst.test[1].id.as_json(), "02-ReadPatient-Destination2")
        self.assertEqual(inst.test[1].name.value, FHIRString("ReadPatient-Destination2").value)
        self.assertEqual(inst.test[1].name.as_json(), "ReadPatient-Destination2")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.title.value, FHIRString("Multisystem Test Script").value)
        self.assertEqual(inst.title.as_json(), "Multisystem Test Script")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example-multisystem").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example-multisystem")
        self.assertEqual(inst.variable[0].defaultValue.value, FHIRString("example").value)
        self.assertEqual(inst.variable[0].defaultValue.as_json(), "example")
        self.assertEqual(inst.variable[0].name.value, FHIRString("Dest1PatientResourceId").value)
        self.assertEqual(inst.variable[0].name.as_json(), "Dest1PatientResourceId")
        self.assertEqual(inst.variable[1].defaultValue.value, FHIRString("example").value)
        self.assertEqual(inst.variable[1].defaultValue.as_json(), "example")
        self.assertEqual(inst.variable[1].name.value, FHIRString("Dest2PatientResourceId").value)
        self.assertEqual(inst.variable[1].name.as_json(), "Dest2PatientResourceId")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")

    def testTestScript4(self):
        inst = self.instantiate_from('testscript-example-search.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript4(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript4(inst2)

    def implTestScript4(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertEqual(inst.description.value, FHIRMarkdown("TestScript example resource with simple Patient search test. The read tests will utilize user defined dynamic variables that will hold the Patient search parameter values.").value)
        self.assertEqual(inst.description.as_json(), "TestScript example resource with simple Patient search test. The read tests will utilize user defined dynamic variables that will hold the Patient search parameter values.")
        self.assertTrue(inst.experimental)
        self.assertFalse(inst.fixture[0].autocreate)
        self.assertFalse(inst.fixture[0].autodelete)
        self.assertEqual(inst.fixture[0].id.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.fixture[0].id.as_json(), "fixture-patient-create")
        self.assertEqual(inst.id.value, FHIRString("testscript-example-search").value)
        self.assertEqual(inst.id.as_json(), "testscript-example-search")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9881").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9881")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Search Operation").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Search Operation")
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#search").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#search")
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("TestScript Example Search").value)
        self.assertEqual(inst.name.as_json(), "TestScript Example Search")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient Search Operation").value)
        self.assertEqual(inst.purpose.as_json(), "Patient Search Operation")
        self.assertEqual(inst.setup.action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.setup.action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.setup.action[0].operation.description.value, FHIRString("Test simple search to verify server support.").value)
        self.assertEqual(inst.setup.action[0].operation.description.as_json(), "Test simple search to verify server support.")
        self.assertTrue(inst.setup.action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[0].operation.params.value, FHIRString("?family=DONTEXPECTAMATCH&given=DONTEXPECTAMATCH").value)
        self.assertEqual(inst.setup.action[0].operation.params.as_json(), "?family=DONTEXPECTAMATCH&given=DONTEXPECTAMATCH")
        self.assertEqual(inst.setup.action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[0].operation.type.code.value, FHIRCode("search").value)
        self.assertEqual(inst.setup.action[0].operation.type.code.as_json(), "search")
        self.assertEqual(inst.setup.action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[1].assert_fhir.description.value, FHIRString("Confirm that the request url contains the family search parameter.").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.description.as_json(), "Confirm that the request url contains the family search parameter.")
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.value, FHIRCode("request").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.as_json(), "request")
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.value, FHIRCode("contains").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.as_json(), "contains")
        self.assertEqual(inst.setup.action[1].assert_fhir.requestURL.value, FHIRString("family").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.requestURL.as_json(), "family")
        self.assertFalse(inst.setup.action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[2].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.setup.action[2].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.setup.action[2].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[2].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[2].assert_fhir.responseCode.value, FHIRString("200").value)
        self.assertEqual(inst.setup.action[2].assert_fhir.responseCode.as_json(), "200")
        self.assertFalse(inst.setup.action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[3].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Bundle.").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.description.as_json(), "Confirm that the returned resource type is Bundle.")
        self.assertEqual(inst.setup.action[3].assert_fhir.resource.value, FHIRCode("Bundle").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.resource.as_json(), "Bundle")
        self.assertFalse(inst.setup.action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[4].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle correctly defines the navigation links.").value)
        self.assertEqual(inst.setup.action[4].assert_fhir.description.as_json(), "Confirm that the returned Bundle correctly defines the navigation links.")
        self.assertTrue(inst.setup.action[4].assert_fhir.navigationLinks)
        self.assertFalse(inst.setup.action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.test[0].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Create a Patient resource and capture the returned HTTP Header Location.").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Create a Patient resource and capture the returned HTTP Header Location.")
        self.assertTrue(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.responseId.value, FHIRId("PatientCreateResponse").value)
        self.assertEqual(inst.test[0].action[0].operation.responseId.as_json(), "PatientCreateResponse")
        self.assertEqual(inst.test[0].action[0].operation.sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.test[0].action[0].operation.sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("create").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "create")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 201(Created).").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 201(Created).")
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.value, FHIRCode("created").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.as_json(), "created")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP Header Location is present.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the returned HTTP Header Location is present.")
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.value, FHIRString("Location").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.as_json(), "Location")
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.value, FHIRCode("notEmpty").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.as_json(), "notEmpty")
        self.assertFalse(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[3].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[0].action[3].operation.description.value, FHIRString("Read the created Patient using the captured Location URL value.").value)
        self.assertEqual(inst.test[0].action[3].operation.description.as_json(), "Read the created Patient using the captured Location URL value.")
        self.assertTrue(inst.test[0].action[3].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[3].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[0].action[3].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[0].action[3].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[3].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[3].operation.url.value, FHIRString("${PatientCreateLocation}").value)
        self.assertEqual(inst.test[0].action[3].operation.url.as_json(), "${PatientCreateLocation}")
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[4].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Patient.").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.as_json(), "Confirm that the returned resource type is Patient.")
        self.assertEqual(inst.test[0].action[5].assert_fhir.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.resource.as_json(), "Patient")
        self.assertFalse(inst.test[0].action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Create a Patient resource and capture the returned HTTP Header Location. Then search for (read) that Patient using the Location URL value and validate the response.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Create a Patient resource and capture the returned HTTP Header Location. Then search for (read) that Patient using the Location URL value and validate the response.")
        self.assertEqual(inst.test[0].id.value, FHIRString("01-PatientCreateSearch").value)
        self.assertEqual(inst.test[0].id.as_json(), "01-PatientCreateSearch")
        self.assertEqual(inst.test[0].name.value, FHIRString("Patient Create Search").value)
        self.assertEqual(inst.test[0].name.as_json(), "Patient Create Search")
        self.assertEqual(inst.test[1].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[1].action[0].operation.description.value, FHIRString("Search for Patient resources on the destination test system.").value)
        self.assertEqual(inst.test[1].action[0].operation.description.as_json(), "Search for Patient resources on the destination test system.")
        self.assertTrue(inst.test[1].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[1].action[0].operation.params.value, FHIRString("?family=${PatientSearchFamilyName}&given=${PatientSearchGivenName}").value)
        self.assertEqual(inst.test[1].action[0].operation.params.as_json(), "?family=${PatientSearchFamilyName}&given=${PatientSearchGivenName}")
        self.assertEqual(inst.test[1].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[1].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[1].action[0].operation.type.code.value, FHIRCode("search").value)
        self.assertEqual(inst.test[1].action[0].operation.type.code.as_json(), "search")
        self.assertEqual(inst.test[1].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[1].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[1].action[1].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[1].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[2].assert_fhir.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[2].assert_fhir.contentType.as_json(), "xml")
        self.assertEqual(inst.test[1].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned format is XML.").value)
        self.assertEqual(inst.test[1].action[2].assert_fhir.description.as_json(), "Confirm that the returned format is XML.")
        self.assertFalse(inst.test[1].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Bundle.").value)
        self.assertEqual(inst.test[1].action[3].assert_fhir.description.as_json(), "Confirm that the returned resource type is Bundle.")
        self.assertEqual(inst.test[1].action[3].assert_fhir.resource.value, FHIRCode("Bundle").value)
        self.assertEqual(inst.test[1].action[3].assert_fhir.resource.as_json(), "Bundle")
        self.assertFalse(inst.test[1].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle conforms to the base FHIR specification.").value)
        self.assertEqual(inst.test[1].action[4].assert_fhir.description.as_json(), "Confirm that the returned Bundle conforms to the base FHIR specification.")
        self.assertEqual(inst.test[1].action[4].assert_fhir.validateProfileId.value, FHIRId("bundle-profile").value)
        self.assertEqual(inst.test[1].action[4].assert_fhir.validateProfileId.as_json(), "bundle-profile")
        self.assertFalse(inst.test[1].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[5].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle type equals 'searchset'.").value)
        self.assertEqual(inst.test[1].action[5].assert_fhir.description.as_json(), "Confirm that the returned Bundle type equals 'searchset'.")
        self.assertEqual(inst.test[1].action[5].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.test[1].action[5].assert_fhir.operator.as_json(), "equals")
        self.assertEqual(inst.test[1].action[5].assert_fhir.path.value, FHIRString("fhir:Bundle/fhir:type/@value").value)
        self.assertEqual(inst.test[1].action[5].assert_fhir.path.as_json(), "fhir:Bundle/fhir:type/@value")
        self.assertEqual(inst.test[1].action[5].assert_fhir.value.value, FHIRString("searchset").value)
        self.assertEqual(inst.test[1].action[5].assert_fhir.value.as_json(), "searchset")
        self.assertFalse(inst.test[1].action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].action[6].assert_fhir.description.value, FHIRString("Confirm that the returned Bundle total is greater than or equal to the number of returned entries.").value)
        self.assertEqual(inst.test[1].action[6].assert_fhir.description.as_json(), "Confirm that the returned Bundle total is greater than or equal to the number of returned entries.")
        self.assertEqual(inst.test[1].action[6].assert_fhir.expression.value, FHIRString("Bundle.total.toInteger() >= entry.count()").value)
        self.assertEqual(inst.test[1].action[6].assert_fhir.expression.as_json(), "Bundle.total.toInteger() >= entry.count()")
        self.assertFalse(inst.test[1].action[6].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].description.value, FHIRString("Search for Patient resources using the user defined dynamic variables ${PatientSearchFamilyName} and ${PatientSearchGivenName} and validate response.").value)
        self.assertEqual(inst.test[1].description.as_json(), "Search for Patient resources using the user defined dynamic variables ${PatientSearchFamilyName} and ${PatientSearchGivenName} and validate response.")
        self.assertEqual(inst.test[1].id.value, FHIRString("02-PatientSearchDynamic").value)
        self.assertEqual(inst.test[1].id.as_json(), "02-PatientSearchDynamic")
        self.assertEqual(inst.test[1].name.value, FHIRString("Patient Search Dynamic").value)
        self.assertEqual(inst.test[1].name.as_json(), "Patient Search Dynamic")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example-search").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example-search")
        self.assertEqual(inst.variable[0].headerField.value, FHIRString("Location").value)
        self.assertEqual(inst.variable[0].headerField.as_json(), "Location")
        self.assertEqual(inst.variable[0].name.value, FHIRString("PatientCreateLocation").value)
        self.assertEqual(inst.variable[0].name.as_json(), "PatientCreateLocation")
        self.assertEqual(inst.variable[0].sourceId.value, FHIRId("PatientCreateResponse").value)
        self.assertEqual(inst.variable[0].sourceId.as_json(), "PatientCreateResponse")
        self.assertEqual(inst.variable[1].description.value, FHIRString("Enter patient search criteria for a known family name on the target system").value)
        self.assertEqual(inst.variable[1].description.as_json(), "Enter patient search criteria for a known family name on the target system")
        self.assertEqual(inst.variable[1].hint.value, FHIRString("[Family name]").value)
        self.assertEqual(inst.variable[1].hint.as_json(), "[Family name]")
        self.assertEqual(inst.variable[1].name.value, FHIRString("PatientSearchFamilyName").value)
        self.assertEqual(inst.variable[1].name.as_json(), "PatientSearchFamilyName")
        self.assertEqual(inst.variable[2].description.value, FHIRString("Enter patient search criteria for a known given name on the target system").value)
        self.assertEqual(inst.variable[2].description.as_json(), "Enter patient search criteria for a known given name on the target system")
        self.assertEqual(inst.variable[2].hint.value, FHIRString("[Given name]").value)
        self.assertEqual(inst.variable[2].hint.as_json(), "[Given name]")
        self.assertEqual(inst.variable[2].name.value, FHIRString("PatientSearchGivenName").value)
        self.assertEqual(inst.variable[2].name.as_json(), "PatientSearchGivenName")
        self.assertEqual(inst.variable[3].description.value, FHIRString("Evaluate the returned Patient searchset Bundle.total value").value)
        self.assertEqual(inst.variable[3].description.as_json(), "Evaluate the returned Patient searchset Bundle.total value")
        self.assertEqual(inst.variable[3].expression.value, FHIRString("Bundle.total.toInteger()").value)
        self.assertEqual(inst.variable[3].expression.as_json(), "Bundle.total.toInteger()")
        self.assertEqual(inst.variable[3].name.value, FHIRString("PatientSearchBundleTotal").value)
        self.assertEqual(inst.variable[3].name.as_json(), "PatientSearchBundleTotal")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")

    def testTestScript5(self):
        inst = self.instantiate_from('testscript-example.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript5(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript5(inst2)

    def implTestScript5(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertEqual(inst.description.value, FHIRMarkdown("TestScript example resource with setup to delete if present and create a new instance of a Patient; and single test definition to read the created Patient with various asserts.").value)
        self.assertEqual(inst.description.as_json(), "TestScript example resource with setup to delete if present and create a new instance of a Patient; and single test definition to read the created Patient with various asserts.")
        self.assertTrue(inst.experimental)
        self.assertFalse(inst.fixture[0].autocreate)
        self.assertFalse(inst.fixture[0].autodelete)
        self.assertEqual(inst.fixture[0].id.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.fixture[0].id.as_json(), "fixture-patient-create")
        self.assertFalse(inst.fixture[1].autocreate)
        self.assertFalse(inst.fixture[1].autodelete)
        self.assertEqual(inst.fixture[1].id.value, FHIRString("fixture-patient-minimum").value)
        self.assertEqual(inst.fixture[1].id.as_json(), "fixture-patient-minimum")
        self.assertEqual(inst.id.value, FHIRString("testscript-example").value)
        self.assertEqual(inst.id.as_json(), "testscript-example")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9876").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9876")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Update, Read and Delete Operations").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Update, Read and Delete Operations")
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#delete").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#delete")
        self.assertEqual(inst.metadata.capability[0].link[1].value, FHIRUri("http://hl7.org/fhir/http.html#read").value)
        self.assertEqual(inst.metadata.capability[0].link[1].as_json(), "http://hl7.org/fhir/http.html#read")
        self.assertEqual(inst.metadata.capability[0].link[2].value, FHIRUri("http://hl7.org/fhir/http.html#update").value)
        self.assertEqual(inst.metadata.capability[0].link[2].as_json(), "http://hl7.org/fhir/http.html#update")
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("TestScript Example").value)
        self.assertEqual(inst.name.as_json(), "TestScript Example")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient Conditional Create (Update), Read and Delete Operations").value)
        self.assertEqual(inst.purpose.as_json(), "Patient Conditional Create (Update), Read and Delete Operations")
        self.assertEqual(inst.setup.action[0].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[0].operation.accept.as_json(), "json")
        self.assertEqual(inst.setup.action[0].operation.description.value, FHIRString("Execute a delete operation to insure the patient does not exist on the server.").value)
        self.assertEqual(inst.setup.action[0].operation.description.as_json(), "Execute a delete operation to insure the patient does not exist on the server.")
        self.assertTrue(inst.setup.action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[0].operation.label.value, FHIRString("SetupDeletePatient").value)
        self.assertEqual(inst.setup.action[0].operation.label.as_json(), "SetupDeletePatient")
        self.assertEqual(inst.setup.action[0].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[0].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[0].operation.type.code.value, FHIRCode("delete").value)
        self.assertEqual(inst.setup.action[0].operation.type.code.as_json(), "delete")
        self.assertEqual(inst.setup.action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK) or 204(No Content).").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK) or 204(No Content).")
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.value, FHIRCode("in").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.operator.as_json(), "in")
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.value, FHIRString("200,204").value)
        self.assertEqual(inst.setup.action[1].assert_fhir.responseCode.as_json(), "200,204")
        self.assertFalse(inst.setup.action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[2].operation.accept.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[2].operation.accept.as_json(), "json")
        self.assertEqual(inst.setup.action[2].operation.contentType.value, FHIRCode("json").value)
        self.assertEqual(inst.setup.action[2].operation.contentType.as_json(), "json")
        self.assertEqual(inst.setup.action[2].operation.description.value, FHIRString("Create patient resource on test server using the contents of fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.description.as_json(), "Create patient resource on test server using the contents of fixture-patient-create")
        self.assertTrue(inst.setup.action[2].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[2].operation.label.value, FHIRString("SetupCreatePatient").value)
        self.assertEqual(inst.setup.action[2].operation.label.as_json(), "SetupCreatePatient")
        self.assertEqual(inst.setup.action[2].operation.params.value, FHIRString("/${createResourceId}").value)
        self.assertEqual(inst.setup.action[2].operation.params.as_json(), "/${createResourceId}")
        self.assertEqual(inst.setup.action[2].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[2].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[2].operation.sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.setup.action[2].operation.sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.setup.action[2].operation.type.code.value, FHIRCode("update").value)
        self.assertEqual(inst.setup.action[2].operation.type.code.as_json(), "update")
        self.assertEqual(inst.setup.action[2].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[2].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 201(Created).").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 201(Created).")
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.value, FHIRString("201").value)
        self.assertEqual(inst.setup.action[3].assert_fhir.responseCode.as_json(), "201")
        self.assertFalse(inst.setup.action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[4].operation.description.value, FHIRString("Read the created patient resource on the test server using the id from fixture-patient-create. Verify contents.").value)
        self.assertEqual(inst.setup.action[4].operation.description.as_json(), "Read the created patient resource on the test server using the id from fixture-patient-create. Verify contents.")
        self.assertTrue(inst.setup.action[4].operation.encodeRequestUrl)
        self.assertEqual(inst.setup.action[4].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.setup.action[4].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.setup.action[4].operation.targetId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.setup.action[4].operation.targetId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.setup.action[4].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.setup.action[4].operation.type.code.as_json(), "read")
        self.assertEqual(inst.setup.action[4].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.setup.action[4].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.setup.action[5].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.setup.action[5].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.setup.action[5].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.setup.action[5].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.setup.action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.setup.action[6].assert_fhir.compareToSourceExpression.value, FHIRString("Patient.name.first().family").value)
        self.assertEqual(inst.setup.action[6].assert_fhir.compareToSourceExpression.as_json(), "Patient.name.first().family")
        self.assertEqual(inst.setup.action[6].assert_fhir.compareToSourceId.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.setup.action[6].assert_fhir.compareToSourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.setup.action[6].assert_fhir.description.value, FHIRString("Confirm that the returned Patient contains the expected family name 'Chalmers'. Uses explicit compareToSourceId reference to fixture-patient-create used to create the Patient.").value)
        self.assertEqual(inst.setup.action[6].assert_fhir.description.as_json(), "Confirm that the returned Patient contains the expected family name 'Chalmers'. Uses explicit compareToSourceId reference to fixture-patient-create used to create the Patient.")
        self.assertEqual(inst.setup.action[6].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.setup.action[6].assert_fhir.operator.as_json(), "equals")
        self.assertFalse(inst.setup.action[6].assert_fhir.warningOnly)
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.teardown.action[0].operation.description.value, FHIRString("Delete the patient resource on the test server using the id from fixture-patient-create.").value)
        self.assertEqual(inst.teardown.action[0].operation.description.as_json(), "Delete the patient resource on the test server using the id from fixture-patient-create.")
        self.assertTrue(inst.teardown.action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.teardown.action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.teardown.action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.teardown.action[0].operation.targetId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.teardown.action[0].operation.targetId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.teardown.action[0].operation.type.code.value, FHIRCode("delete").value)
        self.assertEqual(inst.teardown.action[0].operation.type.code.as_json(), "delete")
        self.assertEqual(inst.teardown.action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.teardown.action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Read the patient resource on the test server using the id from fixture-patient-create. Prevent URL encoding of the request.").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Read the patient resource on the test server using the id from fixture-patient-create. Prevent URL encoding of the request.")
        self.assertFalse(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.responseId.value, FHIRId("fixture-patient-read").value)
        self.assertEqual(inst.test[0].action[0].operation.responseId.as_json(), "fixture-patient-read")
        self.assertEqual(inst.test[0].action[0].operation.targetId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.test[0].action[0].operation.targetId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[1].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[1].assert_fhir.label.value, FHIRString("01-ReadPatientOK").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.label.as_json(), "01-ReadPatientOK")
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.")
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.value, FHIRCode("response").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.direction.as_json(), "response")
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.value, FHIRString("Last-Modified").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.headerField.as_json(), "Last-Modified")
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.value, FHIRCode("notEmpty").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.operator.as_json(), "notEmpty")
        self.assertTrue(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Patient.").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.as_json(), "Confirm that the returned resource type is Patient.")
        self.assertEqual(inst.test[0].action[3].assert_fhir.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.resource.as_json(), "Patient")
        self.assertFalse(inst.test[0].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned Patient conforms to the base FHIR specification.").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.as_json(), "Confirm that the returned Patient conforms to the base FHIR specification.")
        self.assertEqual(inst.test[0].action[4].assert_fhir.validateProfileId.value, FHIRId("patient-profile").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.validateProfileId.as_json(), "patient-profile")
        self.assertFalse(inst.test[0].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.value, FHIRString("Confirm that the returned Patient contains the expected family name 'Chalmers'. Uses explicit sourceId reference to read responseId fixture.").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.as_json(), "Confirm that the returned Patient contains the expected family name 'Chalmers'. Uses explicit sourceId reference to read responseId fixture.")
        self.assertEqual(inst.test[0].action[5].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.operator.as_json(), "equals")
        self.assertEqual(inst.test[0].action[5].assert_fhir.path.value, FHIRString("fhir:Patient/fhir:name/fhir:family/@value").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.path.as_json(), "fhir:Patient/fhir:name/fhir:family/@value")
        self.assertEqual(inst.test[0].action[5].assert_fhir.sourceId.value, FHIRId("fixture-patient-read").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.sourceId.as_json(), "fixture-patient-read")
        self.assertEqual(inst.test[0].action[5].assert_fhir.value.value, FHIRString("Chalmers").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.value.as_json(), "Chalmers")
        self.assertFalse(inst.test[0].action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[6].assert_fhir.description.value, FHIRString("Confirm that the returned Patient contains the expected given name 'Peter'. Uses explicit sourceId reference to read responseId fixture.").value)
        self.assertEqual(inst.test[0].action[6].assert_fhir.description.as_json(), "Confirm that the returned Patient contains the expected given name 'Peter'. Uses explicit sourceId reference to read responseId fixture.")
        self.assertEqual(inst.test[0].action[6].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.test[0].action[6].assert_fhir.operator.as_json(), "equals")
        self.assertEqual(inst.test[0].action[6].assert_fhir.path.value, FHIRString("fhir:Patient/fhir:name/fhir:given/@value").value)
        self.assertEqual(inst.test[0].action[6].assert_fhir.path.as_json(), "fhir:Patient/fhir:name/fhir:given/@value")
        self.assertEqual(inst.test[0].action[6].assert_fhir.sourceId.value, FHIRId("fixture-patient-read").value)
        self.assertEqual(inst.test[0].action[6].assert_fhir.sourceId.as_json(), "fixture-patient-read")
        self.assertEqual(inst.test[0].action[6].assert_fhir.value.value, FHIRString("Peter").value)
        self.assertEqual(inst.test[0].action[6].assert_fhir.value.as_json(), "Peter")
        self.assertFalse(inst.test[0].action[6].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[7].assert_fhir.compareToSourceId.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.test[0].action[7].assert_fhir.compareToSourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.test[0].action[7].assert_fhir.compareToSourcePath.value, FHIRString("fhir:Patient/fhir:name/fhir:family/@value").value)
        self.assertEqual(inst.test[0].action[7].assert_fhir.compareToSourcePath.as_json(), "fhir:Patient/fhir:name/fhir:family/@value")
        self.assertEqual(inst.test[0].action[7].assert_fhir.operator.value, FHIRCode("equals").value)
        self.assertEqual(inst.test[0].action[7].assert_fhir.operator.as_json(), "equals")
        self.assertEqual(inst.test[0].action[7].assert_fhir.path.value, FHIRString("fhir:Patient/fhir:name/fhir:family/@value").value)
        self.assertEqual(inst.test[0].action[7].assert_fhir.path.as_json(), "fhir:Patient/fhir:name/fhir:family/@value")
        self.assertFalse(inst.test[0].action[7].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[8].assert_fhir.compareToSourceId.value, FHIRString("fixture-patient-create").value)
        self.assertEqual(inst.test[0].action[8].assert_fhir.compareToSourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.test[0].action[8].assert_fhir.compareToSourcePath.value, FHIRString("fhir:Patient/fhir:name/fhir:given/@value").value)
        self.assertEqual(inst.test[0].action[8].assert_fhir.compareToSourcePath.as_json(), "fhir:Patient/fhir:name/fhir:given/@value")
        self.assertEqual(inst.test[0].action[8].assert_fhir.path.value, FHIRString("fhir:Patient/fhir:name/fhir:given/@value").value)
        self.assertEqual(inst.test[0].action[8].assert_fhir.path.as_json(), "fhir:Patient/fhir:name/fhir:given/@value")
        self.assertEqual(inst.test[0].action[8].assert_fhir.sourceId.value, FHIRId("fixture-patient-read").value)
        self.assertEqual(inst.test[0].action[8].assert_fhir.sourceId.as_json(), "fixture-patient-read")
        self.assertFalse(inst.test[0].action[8].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[9].assert_fhir.description.value, FHIRString("Confirm that the returned resource contains the expected retained elements and values. Warning only to provide users with reviewable results.").value)
        self.assertEqual(inst.test[0].action[9].assert_fhir.description.as_json(), "Confirm that the returned resource contains the expected retained elements and values. Warning only to provide users with reviewable results.")
        self.assertEqual(inst.test[0].action[9].assert_fhir.minimumId.value, FHIRString("fixture-patient-minimum").value)
        self.assertEqual(inst.test[0].action[9].assert_fhir.minimumId.as_json(), "fixture-patient-minimum")
        self.assertTrue(inst.test[0].action[9].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Read a Patient and validate response.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Read a Patient and validate response.")
        self.assertEqual(inst.test[0].id.value, FHIRString("01-ReadPatient").value)
        self.assertEqual(inst.test[0].id.as_json(), "01-ReadPatient")
        self.assertEqual(inst.test[0].name.value, FHIRString("Read Patient").value)
        self.assertEqual(inst.test[0].name.as_json(), "Read Patient")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example")
        self.assertEqual(inst.useContext[0].code.code.value, FHIRCode("focus").value)
        self.assertEqual(inst.useContext[0].code.code.as_json(), "focus")
        self.assertEqual(inst.useContext[0].code.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/usage-context-type").value)
        self.assertEqual(inst.useContext[0].code.system.as_json(), "http://terminology.hl7.org/CodeSystem/usage-context-type")
        self.assertEqual(inst.useContext[0].valueCodeableConcept.coding[0].code.value, FHIRCode("positive").value)
        self.assertEqual(inst.useContext[0].valueCodeableConcept.coding[0].code.as_json(), "positive")
        self.assertEqual(inst.useContext[0].valueCodeableConcept.coding[0].system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/variant-state").value)
        self.assertEqual(inst.useContext[0].valueCodeableConcept.coding[0].system.as_json(), "http://terminology.hl7.org/CodeSystem/variant-state")
        self.assertEqual(inst.variable[0].name.value, FHIRString("createResourceId").value)
        self.assertEqual(inst.variable[0].name.as_json(), "createResourceId")
        self.assertEqual(inst.variable[0].path.value, FHIRString("Patient/id").value)
        self.assertEqual(inst.variable[0].path.as_json(), "Patient/id")
        self.assertEqual(inst.variable[0].sourceId.value, FHIRId("fixture-patient-create").value)
        self.assertEqual(inst.variable[0].sourceId.as_json(), "fixture-patient-create")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")

    def testTestScript6(self):
        inst = self.instantiate_from('testscript-example-readtest.json')
        self.assertIsNotNone(inst, 'Must have instantiated a TestScript instance')
        self.implTestScript6(inst)

        js = inst.as_json()
        self.assertEqual("TestScript", js["resourceType"])
        inst2 = testscript.TestScript(js)
        self.implTestScript6(inst2)

    def implTestScript6(self, inst):
        self.assertEqual(inst.contact[0].name.value, FHIRString("Support").value)
        self.assertEqual(inst.contact[0].name.as_json(), "Support")
        self.assertEqual(inst.contact[0].telecom[0].system.value, FHIRCode("email").value)
        self.assertEqual(inst.contact[0].telecom[0].system.as_json(), "email")
        self.assertEqual(inst.contact[0].telecom[0].use.value, FHIRCode("work").value)
        self.assertEqual(inst.contact[0].telecom[0].use.as_json(), "work")
        self.assertEqual(inst.contact[0].telecom[0].value.value, FHIRString("support@HL7.org").value)
        self.assertEqual(inst.contact[0].telecom[0].value.as_json(), "support@HL7.org")
        self.assertEqual(inst.copyright.value, FHIRMarkdown("© HL7.org 2011+").value)
        self.assertEqual(inst.copyright.as_json(), "© HL7.org 2011+")
        self.assertEqual(inst.date.value, FHIRDateTime("2017-01-18").value)
        self.assertEqual(inst.date.as_json(), "2017-01-18")
        self.assertEqual(inst.description.value, FHIRMarkdown("TestScript example resource with ported Sprinkler basic read tests R001, R002, R003, R004. The read tests will utilize user defined dynamic variables that will hold the Patient resource id values.").value)
        self.assertEqual(inst.description.as_json(), "TestScript example resource with ported Sprinkler basic read tests R001, R002, R003, R004. The read tests will utilize user defined dynamic variables that will hold the Patient resource id values.")
        self.assertTrue(inst.experimental)
        self.assertEqual(inst.id.value, FHIRString("testscript-example-readtest").value)
        self.assertEqual(inst.id.as_json(), "testscript-example-readtest")
        self.assertEqual(inst.identifier.system.value, FHIRUri("urn:ietf:rfc:3986").value)
        self.assertEqual(inst.identifier.system.as_json(), "urn:ietf:rfc:3986")
        self.assertEqual(inst.identifier.value.value, FHIRString("urn:oid:1.3.6.1.4.1.21367.2005.3.7.9879").value)
        self.assertEqual(inst.identifier.value.as_json(), "urn:oid:1.3.6.1.4.1.21367.2005.3.7.9879")
        self.assertEqual(inst.jurisdiction[0].coding[0].code.value, FHIRCode("US").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].code.as_json(), "US")
        self.assertEqual(inst.jurisdiction[0].coding[0].display.value, FHIRString("United States of America (the)").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].display.as_json(), "United States of America (the)")
        self.assertEqual(inst.jurisdiction[0].coding[0].system.value, FHIRUri("urn:iso:std:iso:3166").value)
        self.assertEqual(inst.jurisdiction[0].coding[0].system.as_json(), "urn:iso:std:iso:3166")
        self.assertEqual(inst.metadata.capability[0].capabilities.value, FHIRCanonical("CapabilityStatement/example").value)
        self.assertEqual(inst.metadata.capability[0].capabilities.as_json(), "CapabilityStatement/example")
        self.assertEqual(inst.metadata.capability[0].description.value, FHIRString("Patient Read Operation").value)
        self.assertEqual(inst.metadata.capability[0].description.as_json(), "Patient Read Operation")
        self.assertEqual(inst.metadata.capability[0].link[0].value, FHIRUri("http://hl7.org/fhir/http.html#read").value)
        self.assertEqual(inst.metadata.capability[0].link[0].as_json(), "http://hl7.org/fhir/http.html#read")
        self.assertTrue(inst.metadata.capability[0].required)
        self.assertFalse(inst.metadata.capability[0].validated)
        self.assertEqual(inst.metadata.link[0].description.value, FHIRString("Demographics and other administrative information about an individual or animal receiving care or other health-related services.").value)
        self.assertEqual(inst.metadata.link[0].description.as_json(), "Demographics and other administrative information about an individual or animal receiving care or other health-related services.")
        self.assertEqual(inst.metadata.link[0].url.value, FHIRUri("http://hl7.org/fhir/patient.html").value)
        self.assertEqual(inst.metadata.link[0].url.as_json(), "http://hl7.org/fhir/patient.html")
        self.assertEqual(inst.name.value, FHIRString("TestScript Example Read Test").value)
        self.assertEqual(inst.name.as_json(), "TestScript Example Read Test")
        self.assertEqual(inst.publisher.value, FHIRString("HL7").value)
        self.assertEqual(inst.publisher.as_json(), "HL7")
        self.assertEqual(inst.purpose.value, FHIRMarkdown("Patient Read Operation").value)
        self.assertEqual(inst.purpose.as_json(), "Patient Read Operation")
        self.assertEqual(inst.status.value, FHIRCode("draft").value)
        self.assertEqual(inst.status.as_json(), "draft")
        self.assertEqual(inst.test[0].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[0].action[0].operation.description.value, FHIRString("Read the known Patient resource on the destination test system using the user defined dynamic variable ${KnownPatientResourceId}.").value)
        self.assertEqual(inst.test[0].action[0].operation.description.as_json(), "Read the known Patient resource on the destination test system using the user defined dynamic variable ${KnownPatientResourceId}.")
        self.assertTrue(inst.test[0].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[0].action[0].operation.params.value, FHIRString("/${KnownPatientResourceId}").value)
        self.assertEqual(inst.test[0].action[0].operation.params.as_json(), "/${KnownPatientResourceId}")
        self.assertEqual(inst.test[0].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[0].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[0].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[0].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[0].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 200(OK).").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 200(OK).")
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.value, FHIRCode("okay").value)
        self.assertEqual(inst.test[0].action[1].assert_fhir.response.as_json(), "okay")
        self.assertFalse(inst.test[0].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[2].assert_fhir.contentType.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.contentType.as_json(), "xml")
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.value, FHIRString("Confirm that the returned format is XML.").value)
        self.assertEqual(inst.test[0].action[2].assert_fhir.description.as_json(), "Confirm that the returned format is XML.")
        self.assertFalse(inst.test[0].action[2].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.description.as_json(), "Confirm that the returned HTTP Header Last-Modified is present. Warning only as the server might not support versioning.")
        self.assertEqual(inst.test[0].action[3].assert_fhir.headerField.value, FHIRString("Last-Modified").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.headerField.as_json(), "Last-Modified")
        self.assertEqual(inst.test[0].action[3].assert_fhir.operator.value, FHIRCode("notEmpty").value)
        self.assertEqual(inst.test[0].action[3].assert_fhir.operator.as_json(), "notEmpty")
        self.assertTrue(inst.test[0].action[3].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.value, FHIRString("Confirm that the returned resource type is Patient.").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.description.as_json(), "Confirm that the returned resource type is Patient.")
        self.assertEqual(inst.test[0].action[4].assert_fhir.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[0].action[4].assert_fhir.resource.as_json(), "Patient")
        self.assertFalse(inst.test[0].action[4].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.value, FHIRString("Confirm that the returned Patient conforms to the base FHIR specification.").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.description.as_json(), "Confirm that the returned Patient conforms to the base FHIR specification.")
        self.assertEqual(inst.test[0].action[5].assert_fhir.validateProfileId.value, FHIRId("patient-profile").value)
        self.assertEqual(inst.test[0].action[5].assert_fhir.validateProfileId.as_json(), "patient-profile")
        self.assertFalse(inst.test[0].action[5].assert_fhir.warningOnly)
        self.assertEqual(inst.test[0].description.value, FHIRString("Read a known Patient and validate response.").value)
        self.assertEqual(inst.test[0].description.as_json(), "Read a known Patient and validate response.")
        self.assertEqual(inst.test[0].id.value, FHIRString("R001").value)
        self.assertEqual(inst.test[0].id.as_json(), "R001")
        self.assertEqual(inst.test[0].name.value, FHIRString("Sprinkler Read Test R001").value)
        self.assertEqual(inst.test[0].name.as_json(), "Sprinkler Read Test R001")
        self.assertEqual(inst.test[1].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[1].action[0].operation.accept.as_json(), "xml")
        self.assertTrue(inst.test[1].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[1].action[0].operation.params.value, FHIRString("/1").value)
        self.assertEqual(inst.test[1].action[0].operation.params.as_json(), "/1")
        self.assertEqual(inst.test[1].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[1].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[1].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[1].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[1].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[1].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 404(Not Found).").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 404(Not Found).")
        self.assertEqual(inst.test[1].action[1].assert_fhir.response.value, FHIRCode("notFound").value)
        self.assertEqual(inst.test[1].action[1].assert_fhir.response.as_json(), "notFound")
        self.assertFalse(inst.test[1].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[1].description.value, FHIRString("Read an unknown Resource Type and validate response.").value)
        self.assertEqual(inst.test[1].description.as_json(), "Read an unknown Resource Type and validate response.")
        self.assertEqual(inst.test[1].id.value, FHIRString("R002").value)
        self.assertEqual(inst.test[1].id.as_json(), "R002")
        self.assertEqual(inst.test[1].name.value, FHIRString("Sprinkler Read Test R002").value)
        self.assertEqual(inst.test[1].name.as_json(), "Sprinkler Read Test R002")
        self.assertEqual(inst.test[2].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[2].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[2].action[0].operation.description.value, FHIRString("Attempt to read the non-existing Patient resource on the destination test system using the user defined dynamic variable ${NonExistsPatientResourceId}.").value)
        self.assertEqual(inst.test[2].action[0].operation.description.as_json(), "Attempt to read the non-existing Patient resource on the destination test system using the user defined dynamic variable ${NonExistsPatientResourceId}.")
        self.assertTrue(inst.test[2].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[2].action[0].operation.params.value, FHIRString("/${NonExistsPatientResourceId}").value)
        self.assertEqual(inst.test[2].action[0].operation.params.as_json(), "/${NonExistsPatientResourceId}")
        self.assertEqual(inst.test[2].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[2].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[2].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[2].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[2].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[2].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[2].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 404(Not Found).").value)
        self.assertEqual(inst.test[2].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 404(Not Found).")
        self.assertEqual(inst.test[2].action[1].assert_fhir.response.value, FHIRCode("notFound").value)
        self.assertEqual(inst.test[2].action[1].assert_fhir.response.as_json(), "notFound")
        self.assertFalse(inst.test[2].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[2].description.value, FHIRString("Read a known, non-existing Patient and validate response.").value)
        self.assertEqual(inst.test[2].description.as_json(), "Read a known, non-existing Patient and validate response.")
        self.assertEqual(inst.test[2].id.value, FHIRString("R003").value)
        self.assertEqual(inst.test[2].id.as_json(), "R003")
        self.assertEqual(inst.test[2].name.value, FHIRString("Sprinkler Read Test R003").value)
        self.assertEqual(inst.test[2].name.as_json(), "Sprinkler Read Test R003")
        self.assertEqual(inst.test[3].action[0].operation.accept.value, FHIRCode("xml").value)
        self.assertEqual(inst.test[3].action[0].operation.accept.as_json(), "xml")
        self.assertEqual(inst.test[3].action[0].operation.description.value, FHIRString("Attempt to read a Patient resource on the destination test system using known bad formatted resource id.").value)
        self.assertEqual(inst.test[3].action[0].operation.description.as_json(), "Attempt to read a Patient resource on the destination test system using known bad formatted resource id.")
        self.assertTrue(inst.test[3].action[0].operation.encodeRequestUrl)
        self.assertEqual(inst.test[3].action[0].operation.params.value, FHIRString("/ID-may-not-contain-CAPITALS").value)
        self.assertEqual(inst.test[3].action[0].operation.params.as_json(), "/ID-may-not-contain-CAPITALS")
        self.assertEqual(inst.test[3].action[0].operation.resource.value, FHIRCode("Patient").value)
        self.assertEqual(inst.test[3].action[0].operation.resource.as_json(), "Patient")
        self.assertEqual(inst.test[3].action[0].operation.type.code.value, FHIRCode("read").value)
        self.assertEqual(inst.test[3].action[0].operation.type.code.as_json(), "read")
        self.assertEqual(inst.test[3].action[0].operation.type.system.value, FHIRUri("http://terminology.hl7.org/CodeSystem/testscript-operation-codes").value)
        self.assertEqual(inst.test[3].action[0].operation.type.system.as_json(), "http://terminology.hl7.org/CodeSystem/testscript-operation-codes")
        self.assertEqual(inst.test[3].action[1].assert_fhir.description.value, FHIRString("Confirm that the returned HTTP status is 400(Bad Request).").value)
        self.assertEqual(inst.test[3].action[1].assert_fhir.description.as_json(), "Confirm that the returned HTTP status is 400(Bad Request).")
        self.assertEqual(inst.test[3].action[1].assert_fhir.response.value, FHIRCode("bad").value)
        self.assertEqual(inst.test[3].action[1].assert_fhir.response.as_json(), "bad")
        self.assertFalse(inst.test[3].action[1].assert_fhir.warningOnly)
        self.assertEqual(inst.test[3].description.value, FHIRString("Read a Patient using a known bad formatted resource id and validate response.").value)
        self.assertEqual(inst.test[3].description.as_json(), "Read a Patient using a known bad formatted resource id and validate response.")
        self.assertEqual(inst.test[3].id.value, FHIRString("R004").value)
        self.assertEqual(inst.test[3].id.as_json(), "R004")
        self.assertEqual(inst.test[3].name.value, FHIRString("Sprinkler Read Test R004").value)
        self.assertEqual(inst.test[3].name.as_json(), "Sprinkler Read Test R004")
        self.assertEqual(inst.text.status.value, FHIRCode("generated").value)
        self.assertEqual(inst.text.status.as_json(), "generated")
        self.assertEqual(inst.url.value, FHIRUri("http://hl7.org/fhir/TestScript/testscript-example-readtest").value)
        self.assertEqual(inst.url.as_json(), "http://hl7.org/fhir/TestScript/testscript-example-readtest")
        self.assertEqual(inst.variable[0].defaultValue.value, FHIRString("example").value)
        self.assertEqual(inst.variable[0].defaultValue.as_json(), "example")
        self.assertEqual(inst.variable[0].name.value, FHIRString("KnownPatientResourceId").value)
        self.assertEqual(inst.variable[0].name.as_json(), "KnownPatientResourceId")
        self.assertEqual(inst.variable[1].defaultValue.value, FHIRString("does-not-exist").value)
        self.assertEqual(inst.variable[1].defaultValue.as_json(), "does-not-exist")
        self.assertEqual(inst.variable[1].name.value, FHIRString("NonExistsPatientResourceId").value)
        self.assertEqual(inst.variable[1].name.as_json(), "NonExistsPatientResourceId")
        self.assertEqual(inst.version.value, FHIRString("1.0").value)
        self.assertEqual(inst.version.as_json(), "1.0")


from fhirclient.models.fhirdatatypes import FHIRString, FHIRCode, FHIRMarkdown, FHIRDateTime, FHIRUri, FHIRCanonical, FHIRId